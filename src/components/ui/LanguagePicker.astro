---
import { languages } from '@/i18n/ui';
import { getLangFromUrl } from '@/i18n/utils';
import { Languages } from 'lucide-astro';

const lang = getLangFromUrl(Astro.url);
---

<div class="relative group">
  <button class="p-2 rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors flex items-center gap-2">
    <Languages class="w-5 h-5" />
    <span class="text-xs font-bold uppercase">{lang}</span>
  </button>
  
  <div class="absolute right-0 top-full pt-2 hidden group-hover:block z-50">
    <div class="min-w-[120px] bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl overflow-hidden">
      {Object.entries(languages).map(([code, label]) => (
        <a
          href={code === 'en' ? '/' : `/${code}/`}
          class={`block px-4 py-2 text-xs font-bold hover:bg-slate-50 dark:hover:bg-slate-700 ${lang === code ? 'text-primary' : 'text-slate-700 dark:text-slate-300'}`}
        >
          {label}
        </a>
      ))}
    </div>
  </div>
</div>
